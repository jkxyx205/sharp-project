var CodeInput=function(){"use strict";function t(t){this.options=t,this.id=t.id,this.containerDOM=document.getElementById(this.id),this.tableContainerDOM=this.containerDOM.querySelector(".code-input-table"),this.inputDOM=this.containerDOM.querySelector(".code-input"),this.tableDOM=this.containerDOM.getElementsByTagName("table")[0];let e=this.tableDOM.querySelector("tbody").getElementsByTagName("tr");function i(t){for(let i of e)t(i)}function s(t){i((e=>{e.dataset.code===t&&n(this,e)}))}function n(t,e){t.inputDOM.value=e.dataset[t.options.input||"code"];for(let i in e.dataset)t.inputDOM.dataset[i]=e.dataset[i]}function a(t){for(let e in t.inputDOM.dataset)t.inputDOM.dataset[e]=""}this.codeInputTableEmptyDOM=this.containerDOM.querySelector(".code-input-table-empty"),this.search=this.options.search?this.options.search.split(/,\s*/):["code"],this.options.value?"string"==typeof this.options.value?s.call(this,this.options.value):s.call(this,this.options.value.code):a(this),this.inputDOM.addEventListener("focus",(t=>{let e=document.createEvent("Event");e.initEvent("input",!0,!1),this.inputDOM.dispatchEvent(e)})),this.inputDOM.addEventListener("blur",(t=>{console.log("input blur..."),a(this),this.inputDOM.value&&s.call(this,this.inputDOM.value),setTimeout((()=>{this.options.blur&&this.options.blur(this.getValue()),this.tableContainerDOM.style.display="none",this.inputDOM.value?this.getValue().id?this.inputDOM.classList.remove("is-invalid"):(console.log("invalid value"),this.inputDOM.classList.add("is-invalid")):this.inputDOM.classList.remove("is-invalid")}),50)})),this.inputDOM.addEventListener("input",(t=>{this.tableContainerDOM.style.display="block",i((t=>{t.style.display="table-row"})),console.log("input value = ",t.target.value);let e=!1;t.target.value&&(i((i=>{let s=!1;for(let n of this.search)if(i.dataset[n].indexOf(t.target.value)>-1){e=!0,s=!0;break}s||(i.style.display="none")})),console.log("hasData = ",e),this.codeInputTableEmptyDOM.style.display=e?"none":"block")})),i((t=>{t.addEventListener("click",(t=>{n(this,t.target.parentElement)}))}))}return t.prototype.getValue=function(){return{...this.inputDOM.dataset}},t}();
