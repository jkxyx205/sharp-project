<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
>
<head th:replace="includes/base :: common_header(~{},~{::link},~{::style})">
    <link rel="stylesheet" th:href="@{/css/tab-common.css}">
    <link rel="stylesheet" th:href="@{/plugins/simplemde/simplemde.min.css}">
    <style>
        .CodeMirror {
            height: calc(100vh - 430px);
        }

        .editor-preview img {
            max-width: 70%;
            margin: 0 auto;
            display: block;
        }

        .editor-preview h1 {
            font-size: 1.4rem;
        }

        .editor-preview h2 {
            font-size: 1.2rem;
        }

        .editor-preview h3 {
            font-size: 1.1rem;
        }

        .editor-preview table {
            width: 100%;
        }

        .editor-preview table, .editor-preview table td, .editor-preview table th {
            border: 1px solid #3c3c3c;
            border-collapse: collapse;
        }

        .editor-preview table th {
            padding: 0!important;
            text-align: center;
        }

        .editor-preview table td {
            padding: 0 8px;
        }

    </style>
    <script type="text/javascript" th:src="@{/plugins/simplemde/simplemde.min.js}"></script>
</head>
<body class="app">
<th:block th:replace="includes/base :: common_content(~{::div})">
    <div class="container-fluid">
        <div class="card">
            <div class="card-header">markdown 编辑器</div>
            <div class="card-body">
                <form class="form-horizontal" id="form">
                    <div class="form-group row">
                        <label class="col-1 col-form-label required" for="markdown">正文</label>
                        <div class="col-11">
                            <textarea id="markdown" th:text="${markdown}"></textarea>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="offset-1 col-11"> <button class="btn btn-primary mr-4" type="button" onclick="send()">
                            <i class="fa fa-send"></i> 保存</button></div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</th:block>
<th:block th:replace="includes/base :: common_js(~{::script})">
    <script>
        const simpleMDE = new SimpleMDE({
            element: document.getElementById('markdown'),
            // previewClass: ["editor-preview"],
            status: false,
        });

        function send() {
            console.log("value = ", simpleMDE.value())
            console.log("html = ", simpleMDE.markdown(simpleMDE.value()))
        }
    </script>
</th:block>
</body>
</html>